(三)java多线程之wait notify notifyAll
===============================================
>本人邮箱: <kco1989@qq.com>
>欢迎转载,转载请注明网址 <http://blog.csdn.net/tianshi_kco>
>github: <https://github.com/kco1989/kco>
>代码已经全部托管[github](https://github.com/kco1989/kco/blob/master/threadTest)有需要的同学自行下载

[TOC]

# 引言
今天我打算讲一下`Object.wait`,`Object.notify`,`Object.notifyAll`这三个方法. 首先我们查看一下api看看,官方api对这几个方法的介绍.

# 理论
* `Object.wait()`: 导致当前线程一直等待,直到另一外一个线程用同一个对象调用`Object.notify`或`Object.notifyAll`方法.换种说法,就是调用`Object.wait()`和调用`Object.wait(0)`行为是一致的.
在调用`wait`时,必须要有调用对象的锁.而这个锁会一直等待直接这个对象调用`notify`或`notifyAll`方法才被释放.这是等待的线程才能重新获取对象的锁而继续执行.
这里需要防止中断或假唤醒线程,所以一般在调用`wait`会使用循环,比如
```java
synchronized (obj) {
 	while (当条件不满足时)
		obj.wait();
		... // Perform action appropriate to condition
}
```

* `Object.notify`/`Object.notifyAll` 唤醒一个拥有用到当前对象的锁且在等待的线程.如果有多个等待的线程,则随机唤醒一个.而被唤醒的线程会直到当前线程释放对象的锁后才被执行.被唤醒的线程会使用竞争的方式去获取对象的锁.这些被唤醒的线程都是一视同仁,不会被区别对待.所以每个线程获取对象的锁的几率都是平等的,也是随机的.

总之,在同一个时间点只能有一个线程拥有对象的锁.

上面的解释可能比较官方,出现什么`对象的锁`,`唤醒`等待之类的时.初学者可能还不能很好的理解.现在我还是用上篇文章的比喻解释一下.

比如现在有一群`小明`/'小红'都想进入卧室,卧室的门只有一个,钥匙也只有一把,每次也只能进入一个'小明'和一个`小红`.(多了就...)这时候卧室里面如果只有有一个人,那么他/她就只能等待,然后释放卧室门的锁.然后唤醒另外一个她/他进来.进来后把卧室门给锁了,等`小明`和`小红`谈完人生和理想的时候.再通知其他人,告诉他们房间是空的,可以进来了.这是另外的一群`小明`/`小红`就会争先恐后的进来.但还是只能进一个`小明`和一个`小红`.(这里不理解,没有关系,看完文章之后,再回过头看一下这里,说不定就会豁然开朗了.)

> 这些人比喻就是上面讲到的`线程`,卧室就相当于上面说的`对象`,门就相当于上面的`锁`,这样一比喻是不是好理解一点.需要注意的是卧室是特定的一个,即每个人等待的卧室都必须是同一个.这样才能用那把钥匙去开门.

# 编码
如果有些人还不能理解,那么这里我就写一个程序再来解析一下.就用上面的比喻做例子吧.ok,开始编码.

* 首先,我们要先定一个抽象卧室类`Room`,这个类需要用成员变量`gril`,还必须提供两个方法`makeGridInRoom(String gril)`和`playWithGril(String boy)`,这个类的实现我们暂时先放放,后面再说

* 之后,我们要创建中间人来一个找小妞的类,`GrilProduct`,把卧室`room`传进来,然后依此找到十个小妞进入卧室里.

```java
public class GrilProduct implements Runnable{
    private Room room;
    public GrilProduct(Room room) {
        this.room = room;
    }

    @Override
    public void run() {
        for (int i = 0; i < 10; i ++){
            room.makeGridInRoom("小红" + i + "号");
        }
    }
}
```

* 然后,我们还需要有一个花花公子类,来和小妞谈谈人生,说说理想,`PlayBoy`

```java
public class PlayBoy implements Runnable{
    private Room room;
    private String boy;
    public PlayBoy(Room room, String boy) {
        this.room = room;
        this.boy = boy;
    }

    @Override
    public void run() {
        room.playWithGril(boy);
    }
}
```

* 最后,我们要让那个中间人活动起来,而且需要来依此十个花花公子来和小妞谈人生,谈理想.毕竟小妞一个人也只能应付一个花花公子,加班是很累的.`TestMain`

```java
public class TestMain {
    public static void main(String[] args) {
        Room room1 = new Room1();
        playGameInRoom(room1);

//        Room room2 = new Room2();
//        playGameInRoom(room2);
//
//        Room room3 = new Room3();
//        playGameInRoom(room3);
//
//        Room room4 = new Room4();
//        playGameInRoom(room4);
    }

    public static void playGameInRoom(Room room){
        Thread grilProduct = new Thread(new GrilProduct(room));
        Set<Thread> boyThread = new HashSet<>();
        for (int i = 0; i < 10; i ++){
            boyThread.add(new Thread(new PlayBoy(room, "小明" + i + "号")));
        }

        grilProduct.start();
        for (Thread boy : boyThread){
            boy.start();
        }
    }

}
```

行了,现在开始来考虑`Room`要怎么写.
* 第一个想法,比较简单,小妞来了就来了,花花公子来了就开始谈人生,谈理想.编写`Room1`继承`Room`

```java
public class Room1 extends Room{

    private String gril;

    @Override
    public synchronized void makeGridInRoom(String gril){
        this.gril = gril;
    }

    @Override
    public synchronized void playWithGril(String boy){
        System.out.println(boy + " play with " + this.gril);
        this.gril = null;
    }
}
```

运行一下结果:

```
小明1号 play with 小红9号
小明3号 play with null
小明6号 play with null
小明0号 play with null
小明8号 play with null
小明5号 play with null
小明7号 play with null
小明2号 play with null
小明4号 play with null
小明9号 play with null

```
我靠,怎么只有`小明1号`和`小红9号`聊上了,其他公子自己玩. 哦,原来是`小红9号`把前面几个给挤掉了,其他`小明`,`小红`不服了,凭什么`小红9号`那么霸气.行,为了满足大家,继续改..

* 第二个想法,如果花花公子来了,但小妞不在卧室,那么公子就会离开;另外如果一个小妞发现卧室有人，她也选择离开．

```java
public class Room2 extends Room{

    @Override
    public synchronized void makeGridInRoom(String gril){
        if (this.gril != null){
            return;
        }
        this.gril = gril;
    }

    @Override
    public synchronized void playWithGril(String boy){
        if (this.gril == null){
            return;
        }
        System.out.println(boy + " play with " + this.gril);
        this.gril = null;
    }
}
```

运行结果是

```
小明1号 play with 小红0号
```

而且每次运行结果都不一样,这时候其他人不爽了,为什么我进入的时候没人呢?
这里我们需要改变一下策略.如果卧室没人.那么让他们就睡一下,等待其他人来谈完人生再走.

```java
public class Room3 extends Room{

    @Override
    public synchronized void makeGridInRoom(String gril){
        while (this.gril != null){
            try {
                Thread.sleep(10);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }
        this.gril = gril;
    }

    @Override
    public synchronized void playWithGril(String boy){
        while (this.gril == null){
            try {
                Thread.sleep(10);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }
        System.out.println(boy + " play with " + this.gril);
        this.gril = null;
    }
}
```

运行结果.我靠,卧室被锁了,而且只有一个人一直在里面孤零零的等着,永远等不到另外一个人来.悲剧了..... 

不行,我们还是要改变一下策略.如果花花公子发现卧室里没有小妞,那就先等着.等待小妞来了,让她来叫醒我.小妞也是一样,如果卧室里已经有小妞了,那么就先等着,等他们谈完人生,谈完理想再来叫醒我.

```java
public class Room4 extends Room{

    @Override
    public synchronized void makeGridInRoom(String gril){
        while (this.gril != null){
            try {
                this.wait();
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }
        try {
            Thread.sleep(10);
        } catch (InterruptedException e) {
            e.printStackTrace();
        }

        this.notifyAll();
        this.gril = gril;
    }

    @Override
    public synchronized void playWithGril(String boy){
        while (this.gril == null){
            try {
                this.wait();
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }
        System.out.println(boy + " play with " + this.gril);
        try {
            Thread.sleep(10);
        } catch (InterruptedException e) {
            e.printStackTrace();
        }

        this.notifyAll();
        this.gril = null;
    }
}
```

运行结果:

```
小明9号 play with 小红0号
小明1号 play with 小红1号
小明4号 play with 小红2号
小明3号 play with 小红3号
小明2号 play with 小红4号
小明6号 play with 小红5号
小明7号 play with 小红6号
小明0号 play with 小红7号
小明5号 play with 小红8号
小明8号 play with 小红9号
```

谢天谢地啊,每个`小明`都找到`小红`了,我再也不用担心被`小明`/`小红`在k死了.

# 后记
* 在最后两种做法,一种是调用`Thread.sleep`,一种是调用`Object.wait`.两种都是是线程睡眠等待,但为什么结果不一样呢?这里解释一下,`Thread.sleep`会释放资源,但是不会释放锁,所以如果有人进入卧室,就一直霸占这这个卧室,其他压根都进不来.但`Object.wait`除了会释放资源之外,还会释放锁.等到`小红`/`小明`进入卧室,在通知`小明`/`小红`进入卧室.

* 还有使用`Object.notifyAll`和`Object.notify`,我自己觉得在可以使用`Object.notify`的地方,都可以使用`Object.notifyAll`代替,但是可以使用`Object.notifyAll`却不能使用`Object.notify`代替. 在上述的例子,如果只有一个中间人`GrilProduct`只找一个`小红`,而且也只有一个花花公子`PlayBoy`,那么使用`Object.notify`和`Object.notifyAll`都一样,但是如果有多个花花公子,就必须使用`Object.notifyAll`去唤醒所有人,让其中一个人跑进卧室里.其他人进不去,就继续等待.然后继续全部唤醒,继续等待....

* `Object.wait()`和`Object.wait(long)`的区别,`wait()`是进入卧室之后就一直等,直到被唤醒,`wait(long)`则是进入卧室之后一直等或者到了指定时间内被唤醒

对上面的例子改写一下,在`GrilProduct`改为每500ms才找到一个`小红`

```java
public class GrilProduct implements Runnable{
    private Room room;
    public GrilProduct(Room room) {
        this.room = room;
    }

    @Override
    public void run() {
        for (int i = 0; i < 10; i ++){
            try {
                Thread.sleep(500);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
            room.makeGridInRoom("小红" + i + "号");
        }
    }
}
```

然后对`Room4.playWithGril`改为

```java
@Override
public synchronized void playWithGril(String boy){
    while (this.gril == null){
        try {
            System.out.println(boy + " 我的心在等待,永远在等待...");
            this.wait();
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
    }
    System.out.println(boy + " play with " + this.gril);
    try {
        Thread.sleep(10);
    } catch (InterruptedException e) {
        e.printStackTrace();
    }

    this.notifyAll();
    this.gril = null;
}

```

运行一下

```
小明1号 我的心在等待,永远在等待...
小明6号 我的心在等待,永远在等待...
小明3号 我的心在等待,永远在等待...
小明5号 我的心在等待,永远在等待...
小明0号 我的心在等待,永远在等待...
小明8号 我的心在等待,永远在等待...
小明7号 我的心在等待,永远在等待...
小明2号 我的心在等待,永远在等待...
小明4号 我的心在等待,永远在等待...
小明9号 我的心在等待,永远在等待...
小明9号 play with 小红0号
小明4号 我的心在等待,永远在等待...
小明2号 我的心在等待,永远在等待...
小明7号 我的心在等待,永远在等待...
小明8号 我的心在等待,永远在等待...
小明0号 我的心在等待,永远在等待...
小明5号 我的心在等待,永远在等待...
小明3号 我的心在等待,永远在等待...
小明6号 我的心在等待,永远在等待...
小明1号 我的心在等待,永远在等待...
小明1号 play with 小红1号
小明6号 我的心在等待,永远在等待...
小明3号 我的心在等待,永远在等待...
小明5号 我的心在等待,永远在等待...
小明0号 我的心在等待,永远在等待...
小明8号 我的心在等待,永远在等待...
小明7号 我的心在等待,永远在等待...
小明2号 我的心在等待,永远在等待...
小明4号 我的心在等待,永远在等待...
小明4号 play with 小红2号
小明2号 我的心在等待,永远在等待...
小明7号 我的心在等待,永远在等待...
小明8号 我的心在等待,永远在等待...
小明0号 我的心在等待,永远在等待...
小明5号 我的心在等待,永远在等待...
小明3号 我的心在等待,永远在等待...
小明6号 我的心在等待,永远在等待...
小明6号 play with 小红3号
小明3号 我的心在等待,永远在等待...
小明5号 我的心在等待,永远在等待...
小明0号 我的心在等待,永远在等待...
小明8号 我的心在等待,永远在等待...
小明7号 我的心在等待,永远在等待...
小明2号 我的心在等待,永远在等待...
小明2号 play with 小红4号
小明7号 我的心在等待,永远在等待...
小明8号 我的心在等待,永远在等待...
小明0号 我的心在等待,永远在等待...
小明5号 我的心在等待,永远在等待...
小明3号 我的心在等待,永远在等待...
小明3号 play with 小红5号
小明5号 我的心在等待,永远在等待...
小明0号 我的心在等待,永远在等待...
小明8号 我的心在等待,永远在等待...
小明7号 我的心在等待,永远在等待...
小明7号 play with 小红6号
小明8号 我的心在等待,永远在等待...
小明0号 我的心在等待,永远在等待...
小明5号 我的心在等待,永远在等待...
小明5号 play with 小红7号
小明0号 我的心在等待,永远在等待...
小明8号 我的心在等待,永远在等待...
小明8号 play with 小红8号
小明0号 我的心在等待,永远在等待...
小明0号 play with 小红9号

```

然后在对`Room4.playWithGril`改写为

```java
@Override
public synchronized void playWithGril(String boy){
    while (this.gril == null){
        try {
            System.out.println(boy + " 我的心在等待,永远在等待...");
            this.wait(100);
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
    }
    System.out.println(boy + " play with " + this.gril);
    try {
        Thread.sleep(10);
    } catch (InterruptedException e) {
        e.printStackTrace();
    }

    this.notifyAll();
    this.gril = null;
}

```

然后再运行一下

```
小明3号 我的心在等待,永远在等待...
小明1号 我的心在等待,永远在等待...
小明6号 我的心在等待,永远在等待...
小明0号 我的心在等待,永远在等待...
小明8号 我的心在等待,永远在等待...
小明5号 我的心在等待,永远在等待...
小明7号 我的心在等待,永远在等待...
小明2号 我的心在等待,永远在等待...
小明4号 我的心在等待,永远在等待...
小明9号 我的心在等待,永远在等待...
小明3号 我的心在等待,永远在等待...
小明1号 我的心在等待,永远在等待...
小明6号 我的心在等待,永远在等待...
小明8号 我的心在等待,永远在等待...
小明0号 我的心在等待,永远在等待...
小明5号 我的心在等待,永远在等待...
小明7号 我的心在等待,永远在等待...
小明9号 我的心在等待,永远在等待...
小明2号 我的心在等待,永远在等待...
小明4号 我的心在等待,永远在等待...
小明1号 我的心在等待,永远在等待...
小明3号 我的心在等待,永远在等待...
小明6号 我的心在等待,永远在等待...
小明5号 我的心在等待,永远在等待...
小明8号 我的心在等待,永远在等待...
小明0号 我的心在等待,永远在等待...
小明9号 我的心在等待,永远在等待...
小明2号 我的心在等待,永远在等待...
小明4号 我的心在等待,永远在等待...
小明7号 我的心在等待,永远在等待...
小明1号 我的心在等待,永远在等待...
小明3号 我的心在等待,永远在等待...
小明6号 我的心在等待,永远在等待...
小明0号 我的心在等待,永远在等待...
小明8号 我的心在等待,永远在等待...
小明5号 我的心在等待,永远在等待...
小明2号 我的心在等待,永远在等待...
小明7号 我的心在等待,永远在等待...
小明4号 我的心在等待,永远在等待...
小明9号 我的心在等待,永远在等待...
小明3号 我的心在等待,永远在等待...
小明1号 我的心在等待,永远在等待...
小明6号 我的心在等待,永远在等待...
小明8号 我的心在等待,永远在等待...
小明5号 我的心在等待,永远在等待...
小明0号 我的心在等待,永远在等待...
小明2号 我的心在等待,永远在等待...
小明4号 我的心在等待,永远在等待...
小明9号 我的心在等待,永远在等待...
小明7号 我的心在等待,永远在等待...
小明1号 我的心在等待,永远在等待...
小明1号 play with 小红0号
小明7号 我的心在等待,永远在等待...
小明9号 我的心在等待,永远在等待...
小明4号 我的心在等待,永远在等待...
小明2号 我的心在等待,永远在等待...
小明0号 我的心在等待,永远在等待...
小明5号 我的心在等待,永远在等待...
小明8号 我的心在等待,永远在等待...
小明6号 我的心在等待,永远在等待...
小明3号 我的心在等待,永远在等待...
小明6号 我的心在等待,永远在等待...
小明5号 我的心在等待,永远在等待...
小明9号 我的心在等待,永远在等待...
小明7号 我的心在等待,永远在等待...
小明3号 我的心在等待,永远在等待...
小明2号 我的心在等待,永远在等待...
小明0号 我的心在等待,永远在等待...
小明4号 我的心在等待,永远在等待...
小明8号 我的心在等待,永远在等待...
小明6号 我的心在等待,永远在等待...
小明7号 我的心在等待,永远在等待...
小明2号 我的心在等待,永远在等待...
小明0号 我的心在等待,永远在等待...
小明8号 我的心在等待,永远在等待...
小明5号 我的心在等待,永远在等待...
小明9号 我的心在等待,永远在等待...
小明3号 我的心在等待,永远在等待...
小明4号 我的心在等待,永远在等待...
小明6号 我的心在等待,永远在等待...
小明0号 我的心在等待,永远在等待...
小明7号 我的心在等待,永远在等待...
小明4号 我的心在等待,永远在等待...
小明8号 我的心在等待,永远在等待...
小明2号 我的心在等待,永远在等待...
小明3号 我的心在等待,永远在等待...
小明5号 我的心在等待,永远在等待...
小明9号 我的心在等待,永远在等待...
小明8号 我的心在等待,永远在等待...
小明7号 我的心在等待,永远在等待...
小明5号 我的心在等待,永远在等待...
小明3号 我的心在等待,永远在等待...
小明9号 我的心在等待,永远在等待...
小明4号 我的心在等待,永远在等待...
小明0号 我的心在等待,永远在等待...
小明2号 我的心在等待,永远在等待...
小明6号 我的心在等待,永远在等待...
小明3号 play with 小红1号
小明6号 我的心在等待,永远在等待...
小明2号 我的心在等待,永远在等待...
小明0号 我的心在等待,永远在等待...
小明4号 我的心在等待,永远在等待...
小明9号 我的心在等待,永远在等待...
小明5号 我的心在等待,永远在等待...
小明7号 我的心在等待,永远在等待...
小明8号 我的心在等待,永远在等待...
小明5号 我的心在等待,永远在等待...
小明8号 我的心在等待,永远在等待...
小明6号 我的心在等待,永远在等待...
小明9号 我的心在等待,永远在等待...
小明4号 我的心在等待,永远在等待...
小明0号 我的心在等待,永远在等待...
小明2号 我的心在等待,永远在等待...
小明7号 我的心在等待,永远在等待...
小明8号 我的心在等待,永远在等待...
小明9号 我的心在等待,永远在等待...
小明0号 我的心在等待,永远在等待...
小明2号 我的心在等待,永远在等待...
小明5号 我的心在等待,永远在等待...
小明7号 我的心在等待,永远在等待...
小明4号 我的心在等待,永远在等待...
小明6号 我的心在等待,永远在等待...
小明7号 我的心在等待,永远在等待...
小明6号 我的心在等待,永远在等待...
小明2号 我的心在等待,永远在等待...
小明4号 我的心在等待,永远在等待...
小明5号 我的心在等待,永远在等待...
小明8号 我的心在等待,永远在等待...
小明0号 我的心在等待,永远在等待...
小明9号 我的心在等待,永远在等待...
小明7号 我的心在等待,永远在等待...
小明6号 我的心在等待,永远在等待...
小明8号 我的心在等待,永远在等待...
小明0号 我的心在等待,永远在等待...
小明9号 我的心在等待,永远在等待...
小明4号 我的心在等待,永远在等待...
小明2号 我的心在等待,永远在等待...
小明5号 我的心在等待,永远在等待...
小明4号 play with 小红2号
小明8号 我的心在等待,永远在等待...
小明0号 我的心在等待,永远在等待...
小明5号 我的心在等待,永远在等待...
小明2号 我的心在等待,永远在等待...
小明9号 我的心在等待,永远在等待...
小明7号 我的心在等待,永远在等待...
小明6号 我的心在等待,永远在等待...
小明7号 我的心在等待,永远在等待...
小明6号 我的心在等待,永远在等待...
小明0号 我的心在等待,永远在等待...
小明9号 我的心在等待,永远在等待...
小明2号 我的心在等待,永远在等待...
小明5号 我的心在等待,永远在等待...
小明8号 我的心在等待,永远在等待...
小明8号 我的心在等待,永远在等待...
小明0号 我的心在等待,永远在等待...
小明2号 我的心在等待,永远在等待...
小明5号 我的心在等待,永远在等待...
小明6号 我的心在等待,永远在等待...
小明9号 我的心在等待,永远在等待...
小明7号 我的心在等待,永远在等待...
小明2号 我的心在等待,永远在等待...
小明7号 我的心在等待,永远在等待...
小明6号 我的心在等待,永远在等待...
小明9号 我的心在等待,永远在等待...
小明0号 我的心在等待,永远在等待...
小明8号 我的心在等待,永远在等待...
小明5号 我的心在等待,永远在等待...
小明6号 我的心在等待,永远在等待...
小明7号 我的心在等待,永远在等待...
小明2号 我的心在等待,永远在等待...
小明9号 我的心在等待,永远在等待...
小明8号 我的心在等待,永远在等待...
小明0号 我的心在等待,永远在等待...
小明5号 我的心在等待,永远在等待...
小明8号 play with 小红3号
小明5号 我的心在等待,永远在等待...
小明9号 我的心在等待,永远在等待...
小明6号 我的心在等待,永远在等待...
小明0号 我的心在等待,永远在等待...
小明2号 我的心在等待,永远在等待...
小明7号 我的心在等待,永远在等待...
小明6号 我的心在等待,永远在等待...
小明7号 我的心在等待,永远在等待...
小明2号 我的心在等待,永远在等待...
小明0号 我的心在等待,永远在等待...
小明9号 我的心在等待,永远在等待...
小明5号 我的心在等待,永远在等待...
小明9号 我的心在等待,永远在等待...
小明7号 我的心在等待,永远在等待...
小明6号 我的心在等待,永远在等待...
小明5号 我的心在等待,永远在等待...
小明2号 我的心在等待,永远在等待...
小明0号 我的心在等待,永远在等待...
小明2号 我的心在等待,永远在等待...
小明7号 我的心在等待,永远在等待...
小明6号 我的心在等待,永远在等待...
小明0号 我的心在等待,永远在等待...
小明9号 我的心在等待,永远在等待...
小明5号 我的心在等待,永远在等待...
小明0号 我的心在等待,永远在等待...
小明6号 我的心在等待,永远在等待...
小明7号 我的心在等待,永远在等待...
小明9号 我的心在等待,永远在等待...
小明5号 我的心在等待,永远在等待...
小明2号 我的心在等待,永远在等待...
小明6号 play with 小红4号
小明2号 我的心在等待,永远在等待...
小明0号 我的心在等待,永远在等待...
小明5号 我的心在等待,永远在等待...
小明9号 我的心在等待,永远在等待...
小明7号 我的心在等待,永远在等待...
小明9号 我的心在等待,永远在等待...
小明7号 我的心在等待,永远在等待...
小明2号 我的心在等待,永远在等待...
小明5号 我的心在等待,永远在等待...
小明0号 我的心在等待,永远在等待...
小明2号 我的心在等待,永远在等待...
小明0号 我的心在等待,永远在等待...
小明9号 我的心在等待,永远在等待...
小明7号 我的心在等待,永远在等待...
小明5号 我的心在等待,永远在等待...
小明9号 我的心在等待,永远在等待...
小明7号 我的心在等待,永远在等待...
小明5号 我的心在等待,永远在等待...
小明0号 我的心在等待,永远在等待...
小明2号 我的心在等待,永远在等待...
小明0号 我的心在等待,永远在等待...
小明7号 我的心在等待,永远在等待...
小明9号 我的心在等待,永远在等待...
小明5号 我的心在等待,永远在等待...
小明2号 我的心在等待,永远在等待...
小明7号 play with 小红5号
小明0号 我的心在等待,永远在等待...
小明2号 我的心在等待,永远在等待...
小明9号 我的心在等待,永远在等待...
小明5号 我的心在等待,永远在等待...
小明0号 我的心在等待,永远在等待...
小明2号 我的心在等待,永远在等待...
小明5号 我的心在等待,永远在等待...
小明9号 我的心在等待,永远在等待...
小明9号 我的心在等待,永远在等待...
小明5号 我的心在等待,永远在等待...
小明2号 我的心在等待,永远在等待...
小明0号 我的心在等待,永远在等待...
小明2号 我的心在等待,永远在等待...
小明5号 我的心在等待,永远在等待...
小明9号 我的心在等待,永远在等待...
小明0号 我的心在等待,永远在等待...
小明2号 我的心在等待,永远在等待...
小明9号 我的心在等待,永远在等待...
小明5号 我的心在等待,永远在等待...
小明0号 我的心在等待,永远在等待...
小明0号 play with 小红6号
小明5号 我的心在等待,永远在等待...
小明9号 我的心在等待,永远在等待...
小明2号 我的心在等待,永远在等待...
小明2号 我的心在等待,永远在等待...
小明9号 我的心在等待,永远在等待...
小明5号 我的心在等待,永远在等待...
小明2号 我的心在等待,永远在等待...
小明5号 我的心在等待,永远在等待...
小明9号 我的心在等待,永远在等待...
小明2号 我的心在等待,永远在等待...
小明5号 我的心在等待,永远在等待...
小明9号 我的心在等待,永远在等待...
小明9号 我的心在等待,永远在等待...
小明2号 我的心在等待,永远在等待...
小明5号 我的心在等待,永远在等待...
小明5号 play with 小红7号
小明2号 我的心在等待,永远在等待...
小明9号 我的心在等待,永远在等待...
小明2号 我的心在等待,永远在等待...
小明9号 我的心在等待,永远在等待...
小明2号 我的心在等待,永远在等待...
小明9号 我的心在等待,永远在等待...
小明2号 我的心在等待,永远在等待...
小明9号 我的心在等待,永远在等待...
小明2号 我的心在等待,永远在等待...
小明9号 我的心在等待,永远在等待...
小明9号 play with 小红8号
小明2号 我的心在等待,永远在等待...
小明2号 我的心在等待,永远在等待...
小明2号 我的心在等待,永远在等待...
小明2号 我的心在等待,永远在等待...
小明2号 我的心在等待,永远在等待...
小明2号 play with 小红9号
```

最后,聪明的读者就自己对比一下,两份输出有什么不一样的地方,就可以搞定`wait()`和`wait(long)`的区别,这时也应该能明白为什么`wait`方法的调用要写在`while`循环里面了.


---
# 打赏
>如果觉得我的文章写的还过得去的话,有钱就捧个钱场,没钱给我捧个人场(帮我点赞或推荐一下)
>![微信打赏](http://img.blog.csdn.net/20170508085654037?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvdGlhbnNoaV9rY28=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast) 
>![支付宝打赏](http://img.blog.csdn.net/20170508085710334?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvdGlhbnNoaV9rY28=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)